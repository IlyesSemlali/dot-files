#!/bin/bash

source ~/.config/wifi-locations

if LC_ALL=en nmcli device show $WIFI_INTERFACE | grep  'STATE: ' | grep -q disconnected
then
    LOCATION=away
else
    SSID=$(nmcli device show $WIFI_INTERFACE | grep CONNECTION | sed 's/GENERAL.CONNECTION:\s\+//')

    case $SSID in
        $HOME_SSID)
            LOCATION=home
            ;;
        $WORK_SSID)
            LOCATION=office
            ;;
        $MOBILE_SSID)
            LOCATION=commute
            ;;
        *)
            LOCATION=away
            ;;
    esac
fi

echo $LOCATION
